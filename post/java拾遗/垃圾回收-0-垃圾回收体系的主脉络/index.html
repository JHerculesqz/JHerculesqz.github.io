<!doctype html><html lang=zh-cn itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>【垃圾回收】-0-垃圾回收体系的主脉络 - 妙木山</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes"><meta name=MobileOptimized content="width"><meta name=HandheldFriendly content="true"><meta name=applicable-device content="pc,mobile"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=mobile-web-app-capable content="yes"><meta name=author content="猴王无敌"><meta name=description content="1.前言 如果您的女盆友非常喜欢买买买，她将会面临一个严峻的问题——储物空间不够。 所以她需要定期**&amp;ldquo;断舍离&amp;rdquo;**：过"><meta name=keywords content="Hugo,theme,jane"><meta name=generator content="Hugo 0.74.2"><link rel=canonical href=https://jherculesqz.github.io/post/java%E6%8B%BE%E9%81%97/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/sass/jane.min.b3a8813c06e6d785beba22bf8264e174fa2cb3a396b22f9ba24e2c00c18aaf7f.css integrity="sha256-s6iBPAbm14W+uiK/gmThdPoss6OWsi+bok4sAMGKr38=" media=screen crossorigin=anonymous><meta property="og:title" content="【垃圾回收】-0-垃圾回收体系的主脉络"><meta property="og:description" content="1.前言 如果您的女盆友非常喜欢买买买，她将会面临一个严峻的问题——储物空间不够。 所以她需要定期**&ldquo;断舍离&rdquo;**：过"><meta property="og:type" content="article"><meta property="og:url" content="https://jherculesqz.github.io/post/java%E6%8B%BE%E9%81%97/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/"><meta property="article:published_time" content="2021-08-05T08:08:31+08:00"><meta property="article:modified_time" content="2021-08-05T08:08:31+08:00"><meta itemprop=name content="【垃圾回收】-0-垃圾回收体系的主脉络"><meta itemprop=description content="1.前言 如果您的女盆友非常喜欢买买买，她将会面临一个严峻的问题——储物空间不够。 所以她需要定期**&ldquo;断舍离&rdquo;**：过"><meta itemprop=datePublished content="2021-08-05T08:08:31+08:00"><meta itemprop=dateModified content="2021-08-05T08:08:31+08:00"><meta itemprop=wordCount content="2955"><meta itemprop=keywords content="Java拾遗-JVM,"><meta name=twitter:card content="summary"><meta name=twitter:title content="【垃圾回收】-0-垃圾回收体系的主脉络"><meta name=twitter:description content="1.前言 如果您的女盆友非常喜欢买买买，她将会面临一个严峻的问题——储物空间不够。 所以她需要定期**&ldquo;断舍离&rdquo;**：过"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>妙木山</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><li class=mobile-menu-item><a class=menu-item-link href=https://jherculesqz.github.io/>首页</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://jherculesqz.github.io/categories/>技术专栏</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://jherculesqz.github.io/tags/>Tags</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://jherculesqz.github.io/post/>全部文章</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://jherculesqz.github.io/about/>关于</a></li></ul></nav><link rel=stylesheet href=/lib/photoswipe/photoswipe.min.css><link rel=stylesheet href=/lib/photoswipe/default-skin/default-skin.min.css><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header id=header class="header container"><div class=logo-wrapper><a href=/ class=logo>妙木山</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=https://jherculesqz.github.io/>首页</a></li><li class=menu-item><a class=menu-item-link href=https://jherculesqz.github.io/categories/>技术专栏</a></li><li class=menu-item><a class=menu-item-link href=https://jherculesqz.github.io/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=https://jherculesqz.github.io/post/>全部文章</a></li><li class=menu-item><a class=menu-item-link href=https://jherculesqz.github.io/about/>关于</a></li></ul></nav></header><div id=mobile-panel><main id=main class="main bg-llight"><div class=content-wrapper><div id=content class="content container"><article class="post bg-white"><header class=post-header><h1 class=post-title>【垃圾回收】-0-垃圾回收体系的主脉络</h1><div class=post-meta><time datetime=2021-08-05 class=post-time>2021-08-05</time><div class=post-category><a href=https://jherculesqz.github.io/categories/java%E6%8B%BE%E9%81%97/>Java拾遗</a></div><span class=more-meta>约 2955 字</span>
<span class=more-meta>预计阅读 6 分钟</span>
<span id=busuanzi_container_page_pv>| 阅读 <span id=busuanzi_value_page_pv></span></span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>文章目录</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#1前言>1.前言</a></li><li><a href=#2where垃圾收集的目标区域>2.Where：垃圾收集的目标区域</a><ul><li><a href=#目标区域>目标区域</a></li><li><a href=#被回收区域的特征>被回收区域的特征</a></li><li><a href=#不同区域不同回收方式>不同区域，不同回收方式</a></li></ul></li><li><a href=#3when何时会触发垃圾回收>3.When：何时会触发垃圾回收</a></li><li><a href=#4how垃圾回收算法>4.How：垃圾回收算法</a><ul><li><a href=#41什么是垃圾>4.1.什么是垃圾？</a></li><li><a href=#42如何回收垃圾>4.2.如何回收垃圾？</a></li></ul></li><li><a href=#5垃圾回收器垃圾回收算法的具体实现>5.垃圾回收器：垃圾回收算法的具体实现</a><ul><li><a href=#51为什么会有多种垃圾回收器呢>5.1.为什么会有多种垃圾回收器呢？</a></li><li><a href=#52如何搭配使用多种垃圾回收器呢>5.2.如何搭配使用多种垃圾回收器呢？</a></li></ul></li><li><a href=#总结>总结</a></li><li><a href=#废弃>废弃</a></li></ul></nav></div></div><div class=post-content><h1 id=1前言>1.前言</h1><p>如果您的女盆友非常喜欢<strong>买买买</strong>，她将会面临一个严峻的问题——<strong>储物空间不够</strong>。</p><p>所以她需要定期**&ldquo;断舍离&rdquo;**：过一段时间将陈旧的包包、衣服移到不常用的储物柜，再过一段时间把这些不常用的衣物丢掉。</p><p>Java代码也像女盆友一样，喜欢**&ldquo;买买买&rdquo;**——创建大量对象，所以也会面临**内存空间不足**。</p><p>JVM的垃圾回收机制承担了**&ldquo;断舍离&rdquo;**的职责。</p><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/image-20210122102351258.png alt=image-20210122102351258></p><p>下面，我们来宏观地理解一下垃圾回收体系的主脉络。</p><h1 id=2where垃圾收集的目标区域>2.Where：垃圾收集的目标区域</h1><h2 id=目标区域>目标区域</h2><p>垃圾回收，<strong>首先要圈定范围</strong>。</p><p>垃圾回收的目标区域主要发生在运行时数据区的<strong>堆、方法区</strong>：</p><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/2.png alt=image-20210107141117798></p><p>稍微回顾一下运行时数据区的一些知识：</p><ul><li><strong>堆(Heap)</strong></li></ul><blockquote><p>堆=年轻代+老年代</p><p>年轻代=伊甸园区(Eden)+幸存者区0(S0)+幸存者区1(S1)</p></blockquote><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/3.png alt=image-20210107143110413></p><ul><li><strong>方法区(Method Area)</strong></li></ul><blockquote><p>方法区是站在类加载子系统的角度的一种逻辑说法。</p><p>方法区的具体实现是什么呢？</p><p>JDK8之前，是永久代。</p><p>JDK8以后，是采用堆外内存实现的元空间。</p></blockquote><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/4.png alt=image-20210107143140440></p><p>所以，更准确地说，垃圾回收的目标区域主要发生在运行时数据区的<strong>年轻代、老年代、元空间</strong>。</p><h2 id=被回收区域的特征>被回收区域的特征</h2><p>根据分代理论，运行时数据区的各个区域存放的对象有如下特点：</p><ul><li>伊甸园区存放的对象，可以简化理解为新对象，有点像<strong>刚买回来的2021新款LV包包</strong></li><li>幸存者区存放的对象，可以简化理解为存活了一段时间的对象，有点像<strong>去年买回来的LV包包</strong></li><li>老年代存放的对象，可以简化理解为存活很久的对象或者很大的对象，有点像<strong>过气的LV包包</strong></li></ul><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/image-20210122135157426.png alt=image-20210122135157426></p><h2 id=不同区域不同回收方式>不同区域，不同回收方式</h2><p>每次收拾储物空间，可以根据当前的时间、当前的需要，分批收拾。</p><p>垃圾收集也一样，面对不同区域的对象，也会采用不同的回收方式分批回收：</p><ul><li><strong>部分收集法</strong><ul><li><strong>YGC</strong>：也叫Minor GC，针对年轻代垃圾收集。</li><li><strong>OGC</strong>：也叫Major GC，针对老年代垃圾收集。</li><li><strong>混合GC</strong>：年轻代、老年代一起垃圾收集。</li></ul></li><li><strong>全量收集法</strong>：年轻代、老年代、元空间一起垃圾收集。</li></ul><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/6.png alt=image-20210107152239170></p><h1 id=3when何时会触发垃圾回收>3.When：何时会触发垃圾回收</h1><p>明确了垃圾回收的范围，下一步就是明确回收时机。</p><ul><li>YGC：年轻代的伊甸园区满，就好像放新款包包的储物格满了，就会触发YGC。</li><li>OGC：老年代满，就好像老款专属储物格满了，会触发OGC。</li><li>FullGC：触发FullGC的条件很多(详见下图)，就好像整个储物柜一起收集。</li></ul><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/7.png alt=image-20210107154209483></p><h1 id=4how垃圾回收算法>4.How：垃圾回收算法</h1><p><em>说明：本文篇幅有限，不展开任何算法的细节，仅帮助读者建立宏观概念，笔者将在后续文章中详细阐述各种算法细节。</em></p><h2 id=41什么是垃圾>4.1.什么是垃圾？</h2><p>断舍离的时候，什么样的包包算**&ldquo;过时&rdquo;**？一定是有个标准的。</p><p>对于垃圾回收算法也一样，认定无用对象的经典算法有两种：</p><ul><li><strong>引用计数算法</strong>：此算法是在每个对象上增加一个计数器，表示这个对象被多少其它对象引用了。如果某个对象的引用计数器=0，则这个对象被定义为垃圾。</li><li><strong>可达性分析算法</strong>：此算法规定了一组满足条件的对象作为根节点，从这些根节点出发，搜索对象的引用链条，最终形成一个有向图，图中孤立的对象节点，就被定义为垃圾。</li></ul><p>上述垃圾评价算法，各有利弊，后续会展开讨论，在此仅需要有一个概念：这套算法，就是帮助JVM识别一个对象是否属于垃圾。</p><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/8.png alt=image-20210107172657461></p><h2 id=42如何回收垃圾>4.2.如何回收垃圾？</h2><p>识别出了垃圾，就要<strong>有节奏地</strong>、<strong>高效</strong>地开展垃圾回收。</p><p>好吧，问题来了：</p><ul><li><strong>有节奏意味着慢慢来</strong>：肯定要给女盆友时间慢慢收拾，把稍微过时的包包放到不常用的储物格子，把非常过时的包包直接丢掉。</li><li><strong>高效意味着快</strong>：如果女盆友收拾的太慢，就没有人给您做饭了。</li></ul><p>这也是影响JVM性能优化最大的课题：</p><ul><li>如何快速垃圾回收</li><li>如何避免STW问题：Stop The World问题，就是垃圾回收过程中，导致业务代码卡顿。</li></ul><p>这些就是现存的这么多种垃圾回收算法要攻克的核心课题。</p><p>我们接下来宏观地理解一下各类<strong>垃圾回收算法</strong>：</p><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/9.png alt=image-20210107170509963></p><p>我们先看看3种最基础、最经典的<strong>基础算法</strong></p><ul><li><strong>Mark-Sweep</strong>：标记-清除算法</li><li><strong>Copying</strong>：复制算法</li><li><strong>Mark-Compact</strong>：标记-压缩算法</li></ul><p>从收集的区域看，有1种基于上述3种基础算法的<strong>组合算法</strong>：</p><ul><li><strong>分代收集算法</strong>：本质就是不同的区域，采用不同的上述3种基础算法。</li></ul><p>从收集的方式看，有1种基于上述3种基础算法<strong>组合算法</strong>：</p><ul><li><strong>增量收集算法</strong>：本质是业务代码运行和垃圾回收交替进行。</li></ul><p>随着Java的不断发展，又发展出一种新的门派</p><ul><li><strong>分区算法</strong>：本质是将内存区域划分为很多小方格，每个格子按需放对象，与分代理论最大的不同是，同一类型的对象不一定要放在逻辑连续的代。如下图，同样是伊甸园区的对象，并不需要占据逻辑连续的伊甸园区。</li></ul><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/10.png alt=image-20210107161323691></p><h1 id=5垃圾回收器垃圾回收算法的具体实现>5.垃圾回收器：垃圾回收算法的具体实现</h1><p><em>说明：本文篇幅有限，在后续文章中展开垃圾回收器的细节。</em></p><p>垃圾回收器是垃圾回收算法的具体实现，但是理解垃圾回收器对我们有两个难题：</p><ul><li>有多种垃圾回收器</li><li>每种垃圾回收器都主攻某种场景，为了满足大部分业务场景，必须合理组合使用多种垃圾回收器</li></ul><h2 id=51为什么会有多种垃圾回收器呢>5.1.为什么会有多种垃圾回收器呢？</h2><p>除了业务软件对JVM垃圾回收性能的诉求，还有商业原因(例如：Sun认了Oracle当爸爸，例如：RedHat企图当干爹，但亲爹Oracle不让)。</p><h2 id=52如何搭配使用多种垃圾回收器呢>5.2.如何搭配使用多种垃圾回收器呢？</h2><p>本文仅以JDK8为例，列举出垃圾回收器的经典搭配方法：</p><ul><li><strong>Serial+Serial Old</strong>： Serial回收器处理年轻代，Serial Old回收器处理老年代。</li></ul><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/11.png alt=image-20210107182038415></p><ul><li><strong>ParNew+CMS+Serial Old</strong>： ParNew处理年轻代，CMS处理老年代，当CMS失效时，Serial Old回收器兜底老年代。</li></ul><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/12.png alt=image-20210107182113952></p><ul><li><strong>Parallel Scanvenge+Parallel Old</strong>： Parallel Scanvenge处理年轻代，Parallel Old处理老年代。</li></ul><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/13.png alt=image-20210107182137752></p><ul><li>**Parallel Scanvenge + Serial Old：**Parallel Scanvenge处理年轻代，Serial Old处理老年代。这种搭配关系在JDK14以后就开始废弃了。</li></ul><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/14.png alt=image-20210107182201742></p><ul><li><strong>G1</strong>：G1是个神奇的存在，一个回收器通吃年轻代和老年代。这也是JVM目前主推的回收器。</li></ul><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/15.png alt=image-20210107221548740></p><h1 id=总结>总结</h1><p>本文讲解了垃圾回收体系的主脉络：</p><ul><li>垃圾回收发生在年轻代、老年代、方法区。</li><li>垃圾回收的方式：YGC(Minor GC)、OGC(Major GC)、FullGC</li><li>年轻代伊甸园区满时，触发YGC</li><li>老年代满时，触发OGC</li><li>有多种条件，触发FullGC(详见前文配图)</li><li>引用计数算法和可达性分析算法，用来识别哪些对象是垃圾。</li><li>垃圾回收的三种基础算法：标记-清除算法(Mark-Sweep)、复制算法(Copying)、标记-压缩算法(Mark-Compact)</li><li>垃圾回收的两种组合算法：分代收集算法、增量收集算法</li><li>垃圾回收的新门派组合算法：分区收集算法</li><li>由于商业原因和业务需求，JVM提供7种经典垃圾回收器。</li><li>实战时，搭配使用不通过垃圾回收器，满足回收年轻代和老年代的场景。</li><li>G1是一种特殊的垃圾收集器，通吃年轻代和老年代的垃圾回收。</li></ul><p>如果从宏观上理解了垃圾回收体系的全貌，相信聪明的读者不用死记硬背也能得到题目的答案，请您将答案写在下面的评论区吧！</p><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/image-20210122140538305.png alt=image-20210122140538305></p><h1 id=废弃>废弃</h1><p>如果把<strong>JVM</strong>类比为一座<strong>工厂</strong>，那么运行时产生的各种<strong>对象</strong>就像这座工厂里的<strong>打工人</strong>，<strong>运行时数据区</strong>就像打工人的<strong>工位</strong>。</p><p>铁打的营盘流水的兵，工位有限，企业主会安排HR开展裁员工作——清理没价值的打工人，为新人腾出工位。</p><p><strong>垃圾回收体系</strong>就是JVM中，扮演了这个最无情的角色。</p><p><img src=/Java%E6%8B%BE%E9%81%97/%E3%80%90%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E3%80%91-0-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%BD%93%E7%B3%BB%E7%9A%84%E4%B8%BB%E8%84%89%E7%BB%9C/1.png alt=image-20210107150610240></p><p>站在打工人(对象)的角度，垃圾回收体系是无情的存在。</p><p>但站在企业主(JVM)的角度，垃圾回收体系是维系正常生产的重要部件。</p></div><div class=post-copyright><p class=copyright-item><span class=item-title>文章作者</span>
<span class=item-content>猴王无敌</span></p><p class=copyright-item><span class=item-title>上次更新</span>
<span class=item-content>2021-08-05</span></p><p class=copyright-item><span class=item-title>许可协议</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span></p></div><div class=post-reward><input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>赞赏支持</label><div class=qr-code><label class=qr-code-image for=reward><img class=image src=/weixin.png>
<span>微信打赏</span></label>
<label class=qr-code-image for=reward><img class=image src=/alipay.png>
<span>支付宝打赏</span></label></div></div><footer class=post-footer><div class=post-tags><a href=https://jherculesqz.github.io/tags/java%E6%8B%BE%E9%81%97-jvm/>Java拾遗-JVM</a></div><nav class=post-nav><a class=prev href=/post/java%E6%8B%BE%E9%81%97/%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E-0-%E9%9A%8F%E6%9C%BA%E5%BA%94%E5%8F%98+%E6%9C%89%E5%A4%87%E8%80%8C%E6%9D%A5/><i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417l277.93508-310.326815c11.338233-12.190647 11.035334-32.285311-.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"/></svg></i><span class="prev-text nav-default">【执行引擎】-0-随机应变+有备而来</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/post/java%E6%8B%BE%E9%81%97/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6-1-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%89%96%E6%9E%90-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E9%80%9F%E8%A7%88/><span class="next-text nav-default">【类加载机制】-1-类加载器剖析-类加载器速览</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"/></svg></i></a></nav></footer></article></div></div></main><footer id=footer class=footer><div class=icon-links><a href=mailto:JHercules_qz@qq.com rel="me noopener" class=iconfont title=email><svg class="icon" viewBox="0 0 1451 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408 1361.641813S1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523L83.726336 1024H682.532949 753.579947 1348.948139L1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955C777.248 802.205449 742.347691 811.03081 718.063616 811.603883z"/></svg></a><a href=https://github.com/JHerculesqz rel="me noopener" class=iconfont title=github target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M512 12.672c-282.88.0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667.0-12.16-.426667-44.373333-.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333.0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333.0.0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667.0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72.0 68.522667-.64 123.562667-.64 140.202666.0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"/></svg></a><a href=https://jherculesqz.github.io/index.xml rel="noopener alternate" type=application/rss+xml class=iconfont title=rss target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><path d="M819.157333 1024C819.157333 574.592 449.408 204.8.0 204.8V0c561.706667.0 1024 462.293333 1024 1024H819.157333zM140.416 743.04a140.8 140.8.0 01140.501333 140.586667A140.928 140.928.0 01140.074667 1024C62.72 1024 0 961.109333.0 883.626667S62.933333 743.082667 140.416 743.04zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352.0 678.784 306.517333 678.784 678.826667z"/></svg></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme - <a class=theme-link href=https://github.com/xianmin/hugo-theme-jane>Jane</a></span>
<span class=copyright-year>&copy;
2021
<span class=heart><i class=iconfont><svg class="icon" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14"><path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7.0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1.0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2.0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3.1-42.5-8-83.6-24-122.2z" fill="#8a8a8a"/></svg></i></span><span class=author>猴王无敌</span></span>
<span id=busuanzi_container>访客数/访问量：<span id=busuanzi_value_site_uv></span>/<span id=busuanzi_value_site_pv></span></span></div></footer><div class=back-to-top id=back-to-top><i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="35"><path d="M510.866688 227.694839 95.449397 629.218702h235.761562L329.15309 958.01517h362.40389L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777h894.052392v131.813095H63.840492V63.962777zm0 0"/></svg></i></div></div><script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script><script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script><script type=text/javascript src=/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin=anonymous></script><script type=text/javascript src=/js/load-photoswipe.js></script><script type=text/javascript src=/lib/photoswipe/photoswipe.min.js></script><script type=text/javascript src=/lib/photoswipe/photoswipe-ui-default.min.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></body></html>